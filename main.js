(()=>{"use strict";var e=document.querySelector(".profile__edit-btn"),t=(document.querySelector(".profile__name"),document.querySelector(".profile__desc"),document.querySelector(".profile__add-btn")),n=document.querySelector(".profile__avatar-btn"),r=document.querySelector(".popup_type_edit-avatar"),o=document.querySelector(".popup_type_edit-profile"),i=o.querySelector(".popup__form"),a=(o.querySelector(".popup__input_type_name"),o.querySelector(".popup__input_type_profession"),o.querySelector(".popup__submit-btn"),Array.from(o.querySelectorAll(".popup__input")),document.querySelector(".popup_type_add-card")),u=a.querySelector(".popup__form"),c=(u.querySelector(".popup__input_type_img-title"),u.querySelector(".popup__input_type_img-link"),a.querySelector(".popup__submit-btn"),Array.from(a.querySelectorAll(".popup__input")),document.querySelector(".popup_type_zoom-img")),l=(c.querySelector(".popup__img"),c.querySelector(".popup__img-desc"),document.querySelector(".cards-layout")),s=(document.querySelector(".card-template"),document.querySelectorAll(".popup"),document.querySelectorAll(".popup__close-btn"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error",errorClassActive:"popup__input-error_active"});function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){var r=n.data,o=n.handleCardClick,i=n.handleDeleteClick,a=n.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._alt=r.alt,void 0===r.alt&&(this._alt="Изображение: ".concat(r.name)),this._likes=r.likes,this._cardId=r._id,this._ownerId=r.owner._id,this._userId=r.currentUserId,this._cardSelector=t,this._handleCardClick=o,this._handleDeleteClick=i,this._handleLikeClick=a}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.cloneNode(!0).querySelector(".card")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardTitle=this._element.querySelector(".card__title"),this._cardImg=this._element.querySelector(".card__image"),this._likeBtn=this._element.querySelector(".card__like-btn"),this._likeCounter=this._element.querySelector(".card__like-counter"),this._removeBtn=this._element.querySelector(".card__remove-btn"),this._ownerId!=this._userId&&this._removeBtn.remove(),this._cardTitle.textContent=this._name,this._cardImg.src=this._link,this._cardImg.alt=this._alt,this._showCardLikes(),this._showLikeStatus(),this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._removeBtn.addEventListener("click",(function(){e._handleDeleteClick()})),this._likeBtn.addEventListener("click",(function(){e._handleLikeClick()})),this._cardImg.addEventListener("click",(function(){e._handleCardClick(e._name,e._link,e._alt)}))}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"_showLikeStatus",value:function(){this.hasLiked()?this._likeBtn.classList.add("card__like-btn_active"):this._likeBtn.classList.remove("card__like-btn_active")}},{key:"_showCardLikes",value:function(){this._likeCounter.textContent=this._likes.length,this._likes.length>0?this._likeCounter.classList.add("card__like-counter_active"):this._likeCounter.classList.remove("card__like-counter_active")}},{key:"hasLiked",value:function(){var e=this;return this._likes.find((function(t){return t._id===e._userId}))}},{key:"updateLikeCounter",value:function(e){this._likes=e.likes,this._showCardLikes(),this._showLikeStatus()}},{key:"getCardId",value:function(){return this._cardId}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClassActive),t.textContent=""}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorClassActive),t.textContent=e.validationMessage}},{key:"_includeInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_disableButtonElement",value:function(){this._buttonElement.disabled=!0}},{key:"_enableButtonElement",value:function(){this._buttonElement.disabled=!1}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._toggleButtonState()}},{key:"_toggleButtonState",value:function(){this._includeInvalidInput()?this._disableButtonElement():this._enableButtonElement()}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValiadtion",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._itemsArray.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"setItems",value:function(e){this._itemsArray=e}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._closeBtn=this._popup.querySelector(".popup__close-btn"),this._popupContainer=this._popup.querySelector(".popup__container"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"_handleOverlayClose",value:function(e){e.target!=this._popup&&e.target!=this._popupContainer||this.closePopup()}},{key:"setEventListeners",value:function(){this._popup.addEventListener("mousedown",this._handleOverlayClose.bind(this)),this._closeBtn.addEventListener("click",this.closePopup.bind(this))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function O(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._popup.querySelector(".popup__img"),t._imageCaption=t._popup.querySelector(".popup__img-desc"),t}return t=a,(n=[{key:"openPopup",value:function(e,t,n){this._image.src=t,this._image.alt=n,this._imageCaption.textContent=e,k(C(a.prototype),"openPopup",this).call(this)}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=I(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function T(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e,t,n){var r,o=n.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e)).handleFormSubmit=o,r._form=r._popup.querySelector(".popup__form"),r._submitBtn=r._popup.querySelector(".popup__submit-btn"),r._defaultSubmitText=t,r._submitBtn.textContent=r._defaultSubmitText,r._inputList=r._popup.querySelectorAll(".popup__input"),r._formValues={},r}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e.handleFormSubmit(e._getInputValues())})),L(B(a.prototype),"setEventListeners",this).call(this)}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"closePopup",value:function(){L(B(a.prototype),"closePopup",this).call(this),this._form.reset()}},{key:"loadingIndicator",value:function(e){this._submitBtn.textContent=e?"Сохранение...":this._defaultSubmitText}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=D(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function F(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(r);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return F(this,e)});function a(e,t,n){var r,o=n.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._handleFormSubmit=o,r._form=r._popup.querySelector(".popup__form"),r._submitBtn=r._popup.querySelector(".popup__submit-btn"),r._defaultSubmitText=t,r._submitBtn.textContent=r._defaultSubmitText,r}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._submitAction())})),U(N(a.prototype),"setEventListeners",this).call(this)}},{key:"setSubmitAction",value:function(e){this._submitAction=e}},{key:"loadingIndicator",value:function(e){this._submitBtn.textContent=e?"Удаление...":this._defaultSubmitText}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(m);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._about=document.querySelector(n),this._avatar=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent,avatar:this._avatar.src}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}},{key:"setUserAvatar",value:function(e){this._avatar.src=e.avatar}}])&&z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_onResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"_request",value:function(e,t){return fetch(e,t).then(this._onResponse)}},{key:"getUserInfo",value:function(){return this._request("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers})}},{key:"getCards",value:function(){return this._request("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers})}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return this._request("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})})}},{key:"deleteCard",value:function(e){return this._request("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return this._request("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})})}},{key:"setAvatar",value:function(e){var t=e.avatar;return this._request("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})})}},{key:"toggleCardLikeStatus",value:function(e,t){return this._request("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"".concat(t),headers:this._headers,body:JSON.stringify()})}}])&&H(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=new _(s,i);X.enableValidation();var Y=new _(s,u);Y.enableValidation();var Z=new _(s,r);Z.enableValidation();var ee=new y({renderer:function(e){var t=ce(e);ee.addItem(t)}},".cards-layout"),te=new G(".profile__name",".profile__desc",".profile__avatar"),ne=null,re=new A(".popup_type_edit-profile","Сохранить",{handleFormSubmit:function(e){re.loadingIndicator(!0),se.setUserInfo(e).then((function(e){te.setUserInfo(e),re.closePopup()})).catch((function(e){console.log("Ошибка при изменении данных пользователя: ".concat(e))})).finally((function(){re.loadingIndicator(!1)}))}});re.setEventListeners();var oe=new A(".popup_type_add-card","Создать",{handleFormSubmit:function(e){oe.loadingIndicator(!0),se.addCard(e).then((function(e){le(e),oe.closePopup()})).catch((function(e){console.log("Ошибка при добавлении новой карточки: ".concat(e))})).finally((function(){oe.loadingIndicator(!1)}))}});oe.setEventListeners();var ie=new A(".popup_type_edit-avatar","Сохранить",{handleFormSubmit:function(e){ie.loadingIndicator(!0),se.setAvatar(e).then((function(e){te.setUserAvatar(e),ie.closePopup()})).catch((function(e){console.log("Ошибка при изменении аватара пользователя: ".concat(e))})).finally((function(){ie.loadingIndicator(!1)}))}});ie.setEventListeners();var ae=new E(".popup_type_zoom-img");ae.setEventListeners();var ue=new J(".popup_type_confirmation","Да",{handleFormSubmit:function(){}});ue.setEventListeners();var ce=function(e){var t=new f(".card-template",{data:Q(Q({},e),{},{currentUserId:ne}),handleCardClick:function(e,t,n){ae.openPopup(e,t,n)},handleDeleteClick:function(){ue.openPopup(),ue.setSubmitAction((function(){ue.loadingIndicator(!0),se.deleteCard(t.getCardId()).then((function(){t.removeCard(),ue.closePopup()})).catch((function(e){console.log("Ошибка при удалении карточки: ".concat(e))})).finally((function(){ue.loadingIndicator(!1)}))}))},handleLikeClick:function(){t.hasLiked()?se.toggleCardLikeStatus(t.getCardId(),"DELETE").then((function(e){t.updateLikeCounter(e)})).catch((function(e){console.log("Ошибка при отображении лайка карточки с сервера: ".concat(e))})):se.toggleCardLikeStatus(t.getCardId(),"PUT").then((function(e){t.updateLikeCounter(e)})).catch((function(e){console.log("Ошибка при отображении лайка карточки с сервера: ".concat(e))}))}});return t.generateCard()},le=function(e){l.prepend(ce(e))};e.addEventListener("click",(function(){var e=te.getUserInfo();re.setInputValues(e),X.resetValiadtion(),re.openPopup()})),n.addEventListener("click",(function(){Z.resetValiadtion(),ie.openPopup()})),t.addEventListener("click",(function(){Y.resetValiadtion(),oe.openPopup()}));var se=new M({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-52",headers:{authorization:"e0e4f5fc-61ac-48ee-ab02-f5c2e770cefc","Content-Type":"application/json"}});Promise.all([se.getCards(),se.getUserInfo()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1],a=i.name,u=i.about,c=i.avatar,l=i._id;ne=l,ee.setItems(o.reverse()),ee.renderItems(),te.setUserInfo({name:a,about:u}),te.setUserAvatar({avatar:c})})).catch((function(e){console.log("Ошибка при загрузке данных с сервера: ".concat(e))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QnlDLGtCQUNuQi9CLEdBQWNvQixXQUNkLElBRURoTSxFQUFxQjRELGlCQUFpQixTQUFTLFdBQzlDeUcsRUFBcUJzQyxrQkFDckJqQixHQUFpQk0sV0FDakIsSUFFRGpNLEVBQWM2RCxpQkFBaUIsU0FBUyxXQUN2Q3dHLEVBQWtCdUMsa0JBQ2xCcEIsR0FBZ0JTLFdBQ2hCLElBRUQsSUFBTWpCLEdBQU0sSUFBSW5DLEVBQUksQ0FDbkJDLFFWNUplLDhDVTZKZkMsUUFBUyxDQUNSOEQsY1Y3SlksdUNVOEpaLGVBQWdCLHNCQUlsQnhELFFBQVF5RCxJQUFJLENBQUM5QixHQUFJK0IsV0FBWS9CLEdBQUkwQixnQkFDL0IvQyxNQUFLLFlBQTJDLEksSUFBQSxHLEVBQUEsRSw0Q0FBQSxJLGd4QkFBekN4RCxFQUF5QyxZQUFoQ3ZFLEVBQWdDLEVBQWhDQSxLQUFNK0csRUFBMEIsRUFBMUJBLE1BQU9DLEVBQW1CLEVBQW5CQSxPQUFRdkcsRUFBVyxFQUFYQSxJQUNyQ0ksR0FBZ0JKLEVBQ2hCa0ksR0FBVXlDLFNBQVM3RyxFQUFNOEcsV0FDekIxQyxHQUFVMkMsY0FDVnRDLEdBQVlLLFlBQVksQ0FBRXJKLEtBQUFBLEVBQU0rRyxNQUFBQSxJQUNoQ2lDLEdBQVlrQixjQUFjLENBQUVsRCxPQUFBQSxHQUM1QixJQUNBc0MsT0FBTSxTQUFDQyxHQUNQQyxRQUFRQyxJQUFSLGdEQUFxREYsR0FDckQsRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2RhdGEuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY1wiKTtcclxuY29uc3QgcHJvZmlsZUFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVBdmF0YXJFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItYnRuXCIpO1xyXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfZWRpdC1hdmF0YXJcIik7XHJcblxyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiKTtcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZUZvcm0gPSBwb3B1cEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGVOYW1lID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLnBvcHVwX19pbnB1dF90eXBlX25hbWVcIlxyXG4pO1xyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlUHJvZmVzc2lvbiA9IHBvcHVwRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcclxuXHRcIi5wb3B1cF9faW5wdXRfdHlwZV9wcm9mZXNzaW9uXCJcclxuKTtcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZVN1Ym1pdEJ0biA9XHJcblx0cG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnRuXCIpO1xyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlSW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuXHRwb3B1cEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpXHJcbik7XHJcblxyXG5jb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9hZGQtY2FyZFwiKTtcclxuY29uc3QgcG9wdXBBZGRGb3JtID0gcG9wdXBBZGQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuY29uc3QgcG9wdXBBZGRJbWdUaXRsZSA9IHBvcHVwQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLnBvcHVwX19pbnB1dF90eXBlX2ltZy10aXRsZVwiXHJcbik7XHJcbmNvbnN0IHBvcHVwQWRkSW1nTGluayA9IHBvcHVwQWRkRm9ybS5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLnBvcHVwX19pbnB1dF90eXBlX2ltZy1saW5rXCJcclxuKTtcclxuY29uc3QgcG9wdXBBZGRTdWJtaXRCdG4gPSBwb3B1cEFkZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnRuXCIpO1xyXG5jb25zdCBwb3B1cEFkZElucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcblx0cG9wdXBBZGQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIilcclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwWm9vbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV96b29tLWltZ1wiKTtcclxuY29uc3QgcG9wdXBab29tSW1nID0gcG9wdXBab29tLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKTtcclxuY29uc3QgcG9wdXBab29tRGVzYyA9IHBvcHVwWm9vbS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWctZGVzY1wiKTtcclxuXHJcbmNvbnN0IGNhcmRzTGF5b3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkcy1sYXlvdXRcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZC10ZW1wbGF0ZVwiKTtcclxuXHJcbmNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Nsb3NlLWJ0blwiKTtcclxuY29uc3QgZ2V0Q2FyZEJ5RXZlbnQgPSAoZSkgPT4gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoXCIuY2FyZFwiKTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcblx0Zm9ybVNlbGVjdG9yOiBcIi5wb3B1cF9fZm9ybVwiLFxyXG5cdGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxyXG5cdHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0LWJ0blwiLFxyXG5cdGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG5cdGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG5cdGVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yXCIsXHJcblx0ZXJyb3JDbGFzc0FjdGl2ZTogXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXHJcbn07XHJcblxyXG5jb25zdCBiYXNlVXJsID0gXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTUyXCI7XHJcbmNvbnN0IHRva2VuID0gXCJlMGU0ZjVmYy02MWFjLTQ4ZWUtYWIwMi1mNWMyZTc3MGNlZmNcIjtcclxuXHJcbmV4cG9ydCB7XHJcblx0cHJvZmlsZUVkaXRCdG4sXHJcblx0cHJvZmlsZU5hbWUsXHJcblx0cHJvZmlsZURlc2NyaXB0aW9uLFxyXG5cdHByb2ZpbGVBZGRCdG4sXHJcblx0cHJvZmlsZUF2YXRhckVkaXRCdG4sXHJcblx0cG9wdXBFZGl0QXZhdGFyLFxyXG5cdHBvcHVwRWRpdFByb2ZpbGUsXHJcblx0cG9wdXBFZGl0UHJvZmlsZUZvcm0sXHJcblx0cG9wdXBFZGl0UHJvZmlsZU5hbWUsXHJcblx0cG9wdXBFZGl0UHJvZmlsZVByb2Zlc3Npb24sXHJcblx0cG9wdXBFZGl0UHJvZmlsZVN1Ym1pdEJ0bixcclxuXHRwb3B1cEVkaXRQcm9maWxlSW5wdXRMaXN0LFxyXG5cdHBvcHVwQWRkLFxyXG5cdHBvcHVwQWRkRm9ybSxcclxuXHRwb3B1cEFkZEltZ1RpdGxlLFxyXG5cdHBvcHVwQWRkSW1nTGluayxcclxuXHRwb3B1cEFkZFN1Ym1pdEJ0bixcclxuXHRwb3B1cEFkZElucHV0TGlzdCxcclxuXHRwb3B1cFpvb20sXHJcblx0cG9wdXBab29tSW1nLFxyXG5cdHBvcHVwWm9vbURlc2MsXHJcblx0Y2FyZHNMYXlvdXQsXHJcblx0Y2FyZFRlbXBsYXRlLFxyXG5cdHBvcHVwcyxcclxuXHRjbG9zZUJ1dHRvbnMsXHJcblx0Z2V0Q2FyZEJ5RXZlbnQsXHJcblx0dmFsaWRhdGlvbkNvbmZpZyxcclxuXHRiYXNlVXJsLFxyXG5cdHRva2VuLFxyXG59O1xyXG4iLCJjbGFzcyBDYXJkIHtcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdGNhcmRTZWxlY3RvcixcclxuXHRcdHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDbGljaywgaGFuZGxlTGlrZUNsaWNrIH1cclxuXHQpIHtcclxuXHRcdHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcblx0XHR0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG5cdFx0dGhpcy5fYWx0ID0gZGF0YS5hbHQ7XHJcblx0XHRpZiAoZGF0YS5hbHQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLl9hbHQgPSBg0JjQt9C+0LHRgNCw0LbQtdC90LjQtTogJHtkYXRhLm5hbWV9YDtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuXHRcdHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG5cdFx0dGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG5cdFx0dGhpcy5fdXNlcklkID0gZGF0YS5jdXJyZW50VXNlcklkO1xyXG5cdFx0dGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cdFx0dGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuXHRcdHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuXHR9XHJcblxyXG5cdF9nZXRUZW1wbGF0ZSgpIHtcclxuXHRcdGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG5cdFx0XHQuY29udGVudC5jbG9uZU5vZGUodHJ1ZSlcclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuXHJcblx0XHRyZXR1cm4gY2FyZEVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRnZW5lcmF0ZUNhcmQoKSB7XHJcblx0XHR0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHRcdHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuXHRcdHRoaXMuX2NhcmRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcblx0XHR0aGlzLl9saWtlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xyXG5cdFx0dGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1jb3VudGVyXCIpO1xyXG5cdFx0dGhpcy5fcmVtb3ZlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idG5cIik7XHJcblx0XHRpZiAodGhpcy5fb3duZXJJZCAhPSB0aGlzLl91c2VySWQpIHtcclxuXHRcdFx0dGhpcy5fcmVtb3ZlQnRuLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHRcdHRoaXMuX2NhcmRJbWcuc3JjID0gdGhpcy5fbGluaztcclxuXHRcdHRoaXMuX2NhcmRJbWcuYWx0ID0gdGhpcy5fYWx0O1xyXG5cdFx0dGhpcy5fc2hvd0NhcmRMaWtlcygpO1xyXG5cdFx0dGhpcy5fc2hvd0xpa2VTdGF0dXMoKTtcclxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0XHRyZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuXHR9XHJcblxyXG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuX3JlbW92ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLl9oYW5kbGVMaWtlQ2xpY2soKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2NhcmRJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmssIHRoaXMuX2FsdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZUNhcmQoKSB7XHJcblx0XHR0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fZWxlbWVudCA9IG51bGw7XHJcblx0fVxyXG5cclxuXHRfc2hvd0xpa2VTdGF0dXMoKSB7XHJcblx0XHRpZiAodGhpcy5oYXNMaWtlZCgpKSB7XHJcblx0XHRcdHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcclxuXHRcdH1cclxuXHR9XHJcblx0X3Nob3dDYXJkTGlrZXMoKSB7XHJcblx0XHR0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcblx0XHRpZiAodGhpcy5fbGlrZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHR0aGlzLl9saWtlQ291bnRlci5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1jb3VudGVyX2FjdGl2ZVwiKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX2xpa2VDb3VudGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWNvdW50ZXJfYWN0aXZlXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aGFzTGlrZWQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fbGlrZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZCk7XHJcblx0fVxyXG5cdHVwZGF0ZUxpa2VDb3VudGVyKGRhdGEpIHtcclxuXHRcdHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuXHRcdHRoaXMuX3Nob3dDYXJkTGlrZXMoKTtcclxuXHRcdHRoaXMuX3Nob3dMaWtlU3RhdHVzKCk7XHJcblx0fVxyXG5cclxuXHRnZXRDYXJkSWQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fY2FyZElkO1xyXG5cdH1cclxufVxyXG5leHBvcnQgeyBDYXJkIH07XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG5cdGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuXHRcdHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuXHRcdHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcblx0XHR0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG5cdFx0XHR0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKVxyXG5cdFx0KTtcclxuXHRcdHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHR0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuXHRcdCk7XHJcblx0XHRpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuXHRcdGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzQWN0aXZlKTtcclxuXHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcblx0fVxyXG5cclxuXHRfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuXHRcdCk7XHJcblx0XHRpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcclxuXHRcdGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzQWN0aXZlKTtcclxuXHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuXHR9XHJcblxyXG5cdF9pbmNsdWRlSW52YWxpZElucHV0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuXHRcdFx0cmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcblx0XHRpZiAoaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcblx0XHRcdHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0X2Rpc2FibGVCdXR0b25FbGVtZW50KCkge1xyXG5cdFx0dGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRfZW5hYmxlQnV0dG9uRWxlbWVudCgpIHtcclxuXHRcdHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuXHRcdFx0aW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcblx0XHRcdFx0dGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cdH1cclxuXHJcblx0X3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG5cdFx0aWYgKHRoaXMuX2luY2x1ZGVJbnZhbGlkSW5wdXQoKSkge1xyXG5cdFx0XHR0aGlzLl9kaXNhYmxlQnV0dG9uRWxlbWVudCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fZW5hYmxlQnV0dG9uRWxlbWVudCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0ZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRyZXNldFZhbGlhZHRpb24oKSB7XHJcblx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuXHRcdHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuXHRcdFx0dGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9O1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuXHRjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcblx0XHR0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cdFx0dGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJJdGVtcygpIHtcclxuXHRcdHRoaXMuX2l0ZW1zQXJyYXkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cdFx0XHR0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YWRkSXRlbShlbGVtZW50KSB7XHJcblx0XHR0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuXHR9XHJcblx0c2V0SXRlbXMoaXRlbXMpIHtcclxuXHRcdHRoaXMuX2l0ZW1zQXJyYXkgPSBpdGVtcztcclxuXHR9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG5cdGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuXHRcdHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuXHRcdHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnRuXCIpO1xyXG5cdFx0dGhpcy5fcG9wdXBDb250YWluZXIgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jb250YWluZXJcIik7XHJcblx0XHR0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcblx0fVxyXG5cclxuXHRvcGVuUG9wdXAoKSB7XHJcblx0XHR0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG5cdH1cclxuXHJcblx0Y2xvc2VQb3B1cCgpIHtcclxuXHRcdHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcblx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblx0fVxyXG5cclxuXHRfaGFuZGxlRXNjQ2xvc2UoZSkge1xyXG5cdFx0aWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcblx0XHRcdHRoaXMuY2xvc2VQb3B1cCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0X2hhbmRsZU92ZXJsYXlDbG9zZShlKSB7XHJcblx0XHRpZiAoZS50YXJnZXQgPT0gdGhpcy5fcG9wdXAgfHwgZS50YXJnZXQgPT0gdGhpcy5fcG9wdXBDb250YWluZXIpIHtcclxuXHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZXRFdmVudExpc3RlbmVycygpIHtcclxuXHRcdHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFwibW91c2Vkb3duXCIsXHJcblx0XHRcdHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZS5iaW5kKHRoaXMpXHJcblx0XHQpO1xyXG5cdFx0dGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2VQb3B1cC5iaW5kKHRoaXMpKTtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuXHRjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcblx0XHRzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHRcdHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nXCIpO1xyXG5cdFx0dGhpcy5faW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nLWRlc2NcIik7XHJcblx0fVxyXG5cdG9wZW5Qb3B1cChuYW1lLCBsaW5rLCBhbHQpIHtcclxuXHRcdHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcblx0XHR0aGlzLl9pbWFnZS5hbHQgPSBhbHQ7XHJcblx0XHR0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cdFx0c3VwZXIub3BlblBvcHVwKCk7XHJcblx0fVxyXG5cdFxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuXHRjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBkZWZhdWx0U3VibWl0VGV4dCwgeyBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuXHRcdHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuXHRcdHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cdFx0dGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ0blwiKTtcclxuXHRcdHRoaXMuX2RlZmF1bHRTdWJtaXRUZXh0ID0gZGVmYXVsdFN1Ym1pdFRleHQ7XHJcblx0XHR0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSB0aGlzLl9kZWZhdWx0U3VibWl0VGV4dDtcclxuXHRcdHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG5cdFx0dGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG5cdH1cclxuXHRfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcblx0XHR0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuXHRcdFx0dGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcblx0fVxyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0Ly8gIGFkZCBzdWJtaXQgaGFuZGxlciDQtNC+0LHQsNCy0LvRj9GC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQsNCx0LzQuNGC0LAg0YTQvtGA0LzRiy5cclxuXHRcdHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuXHRcdH0pO1xyXG5cdFx0c3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHR9XHJcblx0c2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG5cdFx0dGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcblx0XHRcdGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRjbG9zZVBvcHVwKCkge1xyXG5cdFx0Ly9jbG9zZSBwb3B1cCBhbmQgcmVzZXQgZm9ybVxyXG5cdFx0c3VwZXIuY2xvc2VQb3B1cCgpO1xyXG5cdFx0dGhpcy5fZm9ybS5yZXNldCgpO1xyXG5cdH1cclxuXHRsb2FkaW5nSW5kaWNhdG9yKGlzRmV0Y2hpbmcpIHtcclxuXHRcdHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IGlzRmV0Y2hpbmdcclxuXHRcdFx0PyBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCJcclxuXHRcdFx0OiB0aGlzLl9kZWZhdWx0U3VibWl0VGV4dDtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgZGVmYXVsdFN1Ym1pdFRleHQsIHsgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcblx0XHRzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG5cdFx0dGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcblx0XHR0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19zdWJtaXQtYnRuXCIpO1xyXG5cdFx0dGhpcy5fZGVmYXVsdFN1Ym1pdFRleHQgPSBkZWZhdWx0U3VibWl0VGV4dDtcclxuXHRcdHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRoaXMuX2RlZmF1bHRTdWJtaXRUZXh0O1xyXG5cdH1cclxuXHJcblx0c2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX3N1Ym1pdEFjdGlvbigpKTtcclxuXHRcdH0pO1xyXG5cdFx0c3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHR9XHJcblxyXG5cdHNldFN1Ym1pdEFjdGlvbihhY3Rpb24pIHtcclxuXHRcdHRoaXMuX3N1Ym1pdEFjdGlvbiA9IGFjdGlvbjtcclxuXHR9XHJcblx0bG9hZGluZ0luZGljYXRvcihpc0ZldGNoaW5nKSB7XHJcblx0XHR0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSBpc0ZldGNoaW5nXHJcblx0XHRcdD8gXCLQo9C00LDQu9C10L3QuNC1Li4uXCJcclxuXHRcdFx0OiB0aGlzLl9kZWZhdWx0U3VibWl0VGV4dDtcclxuXHR9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG5cdGNvbnN0cnVjdG9yKHByb2ZpbGVOYW1lLCBwcm9maWxlRGVzYywgcHJpZmlsZUF2YXRhcikge1xyXG5cdFx0dGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJvZmlsZU5hbWUpO1xyXG5cdFx0dGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVEZXNjKTtcclxuXHRcdHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocHJpZmlsZUF2YXRhcik7XHJcblx0fVxyXG5cdGdldFVzZXJJbmZvKCkge1xyXG5cdFx0Y29uc3QgdXNlckRhdGEgPSB7XHJcblx0XHRcdG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcblx0XHRcdGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudCxcclxuXHRcdFx0YXZhdGFyOiB0aGlzLl9hdmF0YXIuc3JjLFxyXG5cdFx0fTtcclxuXHRcdHJldHVybiB1c2VyRGF0YTtcclxuXHR9XHJcblx0c2V0VXNlckluZm8oZGF0YSkge1xyXG5cdFx0dGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuXHRcdHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuXHR9XHJcblx0c2V0VXNlckF2YXRhcihkYXRhKSB7XHJcblx0XHR0aGlzLl9hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcblx0Y29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuXHRcdHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG5cdFx0dGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcblx0fVxyXG5cclxuXHRfb25SZXNwb25zZShyZXMpIHtcclxuXHRcdGlmIChyZXMub2spIHtcclxuXHRcdFx0cmV0dXJuIHJlcy5qc29uKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG5cdH1cclxuXHJcblx0X3JlcXVlc3QodXJsLCBvcHRpb25zKSB7XHJcblx0XHRyZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX29uUmVzcG9uc2UpO1xyXG5cdH1cclxuXHJcblx0Z2V0VXNlckluZm8oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuXHRcdFx0bWV0aG9kOiBcIkdFVFwiLFxyXG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRnZXRDYXJkcygpIHtcclxuXHRcdHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG5cdFx0XHRtZXRob2Q6IFwiR0VUXCIsXHJcblx0XHRcdGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuXHRcdHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG5cdFx0XHRtZXRob2Q6IFwiUE9TVFwiLFxyXG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGxpbmsgfSksXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcblx0XHRcdG1ldGhvZDogXCJERUxFVEVcIixcclxuXHRcdFx0aGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuXHRcdFx0bWV0aG9kOiBcIlBBVENIXCIsXHJcblx0XHRcdGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcblx0XHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSksXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNldEF2YXRhcih7IGF2YXRhciB9KSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcblx0XHRcdG1ldGhvZDogXCJQQVRDSFwiLFxyXG5cdFx0XHRoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG5cdFx0XHRib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0dG9nZ2xlQ2FyZExpa2VTdGF0dXMoY2FyZElkLCBtZXRob2QpIHtcclxuXHRcdHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuXHRcdFx0bWV0aG9kOiBgJHttZXRob2R9YCxcclxuXHRcdFx0aGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoKSxcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG5cdHByb2ZpbGVFZGl0QnRuLFxyXG5cdHByb2ZpbGVBZGRCdG4sXHJcblx0cHJvZmlsZUF2YXRhckVkaXRCdG4sXHJcblx0cG9wdXBFZGl0QXZhdGFyLFxyXG5cdHBvcHVwRWRpdFByb2ZpbGVGb3JtLFxyXG5cdHBvcHVwQWRkRm9ybSxcclxuXHRjYXJkc0xheW91dCxcclxuXHR2YWxpZGF0aW9uQ29uZmlnLFxyXG5cdGJhc2VVcmwsXHJcblx0dG9rZW4sXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2RhdGEuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG5cdHZhbGlkYXRpb25Db25maWcsXHJcblx0cG9wdXBFZGl0UHJvZmlsZUZvcm1cclxuKTtcclxucG9wdXBFZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHBvcHVwQWRkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgcG9wdXBBZGRGb3JtKTtcclxucG9wdXBBZGRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgcG9wdXBBdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuXHR2YWxpZGF0aW9uQ29uZmlnLFxyXG5cdHBvcHVwRWRpdEF2YXRhclxyXG4pO1xyXG5wb3B1cEF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcclxuXHR7XHJcblx0XHRyZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XHJcblx0XHRcdGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmRJdGVtKTtcclxuXHRcdFx0Y2FyZHNMaXN0LmFkZEl0ZW0oY2FyZCk7XHJcblx0XHR9LFxyXG5cdH0sXHJcblx0XCIuY2FyZHMtbGF5b3V0XCJcclxuKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKFxyXG5cdFwiLnByb2ZpbGVfX25hbWVcIixcclxuXHRcIi5wcm9maWxlX19kZXNjXCIsXHJcblx0XCIucHJvZmlsZV9fYXZhdGFyXCJcclxuKTtcclxuXHJcbmxldCBjdXJyZW50VXNlcklkID0gbnVsbDtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0b3IgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuXHRcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiLFxyXG5cdFwi0KHQvtGF0YDQsNC90LjRgtGMXCIsXHJcblx0e1xyXG5cdFx0aGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XHJcblx0XHRcdHByb2ZpbGVFZGl0b3IubG9hZGluZ0luZGljYXRvcih0cnVlKTtcclxuXHRcdFx0YXBpXHJcblx0XHRcdFx0LnNldFVzZXJJbmZvKGZvcm1EYXRhKVxyXG5cdFx0XHRcdC50aGVuKChkYXRhKSA9PiB7XHJcblx0XHRcdFx0XHRwcm9maWxlSW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuXHRcdFx0XHRcdHByb2ZpbGVFZGl0b3IuY2xvc2VQb3B1cCgpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQtNCw0L3QvdGL0YUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPOiAke2Vycn1gKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5maW5hbGx5KCgpID0+IHtcclxuXHRcdFx0XHRcdHByb2ZpbGVFZGl0b3IubG9hZGluZ0luZGljYXRvcihmYWxzZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdH1cclxuKTtcclxuXHJcbnByb2ZpbGVFZGl0b3Iuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRSZW5kZXJlciA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIiwgXCLQodC+0LfQtNCw0YLRjFwiLCB7XHJcblx0aGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XHJcblx0XHRuZXdDYXJkUmVuZGVyZXIubG9hZGluZ0luZGljYXRvcih0cnVlKTtcclxuXHRcdGFwaVxyXG5cdFx0XHQuYWRkQ2FyZChmb3JtRGF0YSlcclxuXHRcdFx0LnRoZW4oKGl0ZW0pID0+IHtcclxuXHRcdFx0XHRyZW5kZXJDYXJkKGl0ZW0pO1xyXG5cdFx0XHRcdG5ld0NhcmRSZW5kZXJlci5jbG9zZVBvcHVwKCk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5jYXRjaCgoZXJyKSA9PiB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LTQvtCx0LDQstC70LXQvdC40Lgg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4OiAke2Vycn1gKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmZpbmFsbHkoKCkgPT4ge1xyXG5cdFx0XHRcdG5ld0NhcmRSZW5kZXJlci5sb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcclxuXHRcdFx0fSk7XHJcblx0fSxcclxufSk7XHJcblxyXG5uZXdDYXJkUmVuZGVyZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJBdmF0YXJFZGl0b3IgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuXHRcIi5wb3B1cF90eXBlX2VkaXQtYXZhdGFyXCIsXHJcblx0XCLQodC+0YXRgNCw0L3QuNGC0YxcIixcclxuXHR7XHJcblx0XHRoYW5kbGVGb3JtU3VibWl0OiAoZm9ybVVybCkgPT4ge1xyXG5cdFx0XHR1c2VyQXZhdGFyRWRpdG9yLmxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XHJcblx0XHRcdGFwaVxyXG5cdFx0XHRcdC5zZXRBdmF0YXIoZm9ybVVybClcclxuXHRcdFx0XHQudGhlbigoZGF0YSkgPT4ge1xyXG5cdFx0XHRcdFx0cHJvZmlsZUluZm8uc2V0VXNlckF2YXRhcihkYXRhKTtcclxuXHRcdFx0XHRcdHVzZXJBdmF0YXJFZGl0b3IuY2xvc2VQb3B1cCgpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INC40LfQvNC10L3QtdC90LjQuCDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y86ICR7ZXJyfWApO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmZpbmFsbHkoKCkgPT4ge1xyXG5cdFx0XHRcdFx0dXNlckF2YXRhckVkaXRvci5sb2FkaW5nSW5kaWNhdG9yKGZhbHNlKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0fVxyXG4pO1xyXG5cclxudXNlckF2YXRhckVkaXRvci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgY2FyZEltZ1pvb20gPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV96b29tLWltZ1wiKTtcclxuXHJcbmNhcmRJbWdab29tLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1c2VyQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcclxuXHRcIi5wb3B1cF90eXBlX2NvbmZpcm1hdGlvblwiLFxyXG5cdFwi0JTQsFwiLFxyXG5cdHtcclxuXHRcdGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHt9LFxyXG5cdH1cclxuKTtcclxuXHJcbnVzZXJDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG5cdGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcIi5jYXJkLXRlbXBsYXRlXCIsIHtcclxuXHRcdGRhdGE6IHsgLi4uZGF0YSwgY3VycmVudFVzZXJJZCB9LFxyXG5cdFx0aGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaywgYWx0KSA9PiB7XHJcblx0XHRcdGNhcmRJbWdab29tLm9wZW5Qb3B1cChuYW1lLCBsaW5rLCBhbHQpO1xyXG5cdFx0fSxcclxuXHRcdGhhbmRsZURlbGV0ZUNsaWNrOiAoKSA9PiB7XHJcblx0XHRcdHVzZXJDb25maXJtYXRpb24ub3BlblBvcHVwKCk7XHJcblx0XHRcdHVzZXJDb25maXJtYXRpb24uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuXHRcdFx0XHR1c2VyQ29uZmlybWF0aW9uLmxvYWRpbmdJbmRpY2F0b3IodHJ1ZSk7XHJcblx0XHRcdFx0YXBpXHJcblx0XHRcdFx0XHQuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG5cdFx0XHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjYXJkLnJlbW92ZUNhcmQoKTtcclxuXHRcdFx0XHRcdFx0dXNlckNvbmZpcm1hdGlvbi5jbG9zZVBvcHVwKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0YPQtNCw0LvQtdC90LjQuCDQutCw0YDRgtC+0YfQutC4OiAke2Vycn1gKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuZmluYWxseSgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHVzZXJDb25maXJtYXRpb24ubG9hZGluZ0luZGljYXRvcihmYWxzZSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0aGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XHJcblx0XHRcdGlmIChjYXJkLmhhc0xpa2VkKCkpIHtcclxuXHRcdFx0XHRhcGlcclxuXHRcdFx0XHRcdC50b2dnbGVDYXJkTGlrZVN0YXR1cyhjYXJkLmdldENhcmRJZCgpLCBcIkRFTEVURVwiKVxyXG5cdFx0XHRcdFx0LnRoZW4oKGRhdGEpID0+IHtcclxuXHRcdFx0XHRcdFx0Y2FyZC51cGRhdGVMaWtlQ291bnRlcihkYXRhKTtcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0XHQuY2F0Y2goKGVycikgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcclxuXHRcdFx0XHRcdFx0XHRg0J7RiNC40LHQutCwINC/0YDQuCDQvtGC0L7QsdGA0LDQttC10L3QuNC4INC70LDQudC60LAg0LrQsNGA0YLQvtGH0LrQuCDRgSDRgdC10YDQstC10YDQsDogJHtlcnJ9YFxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YXBpXHJcblx0XHRcdFx0XHQudG9nZ2xlQ2FyZExpa2VTdGF0dXMoY2FyZC5nZXRDYXJkSWQoKSwgXCJQVVRcIilcclxuXHRcdFx0XHRcdC50aGVuKChkYXRhKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNhcmQudXBkYXRlTGlrZUNvdW50ZXIoZGF0YSk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXHJcblx0XHRcdFx0XHRcdFx0YNCe0YjQuNCx0LrQsCDQv9GA0Lgg0L7RgtC+0LHRgNCw0LbQtdC90LjQuCDQu9Cw0LnQutCwINC60LDRgNGC0L7Rh9C60Lgg0YEg0YHQtdGA0LLQtdGA0LA6ICR7ZXJyfWBcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdH0pO1xyXG5cdHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyQ2FyZCA9IChkYXRhKSA9PiB7XHJcblx0Y2FyZHNMYXlvdXQucHJlcGVuZChjcmVhdGVDYXJkKGRhdGEpKTtcclxufTtcclxuXHJcbnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0Y29uc3QgcHJvZkRhdGEgPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xyXG5cdHByb2ZpbGVFZGl0b3Iuc2V0SW5wdXRWYWx1ZXMocHJvZkRhdGEpO1xyXG5cdHBvcHVwRWRpdFZhbGlkYXRvci5yZXNldFZhbGlhZHRpb24oKTtcclxuXHRwcm9maWxlRWRpdG9yLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBdmF0YXJFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0cG9wdXBBdmF0YXJWYWxpZGF0b3IucmVzZXRWYWxpYWR0aW9uKCk7XHJcblx0dXNlckF2YXRhckVkaXRvci5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5wcm9maWxlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0cG9wdXBBZGRWYWxpZGF0b3IucmVzZXRWYWxpYWR0aW9uKCk7XHJcblx0bmV3Q2FyZFJlbmRlcmVyLm9wZW5Qb3B1cCgpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG5cdGJhc2VVcmw6IGJhc2VVcmwsXHJcblx0aGVhZGVyczoge1xyXG5cdFx0YXV0aG9yaXphdGlvbjogdG9rZW4sXHJcblx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuXHR9LFxyXG59KTtcclxuXHJcblByb21pc2UuYWxsKFthcGkuZ2V0Q2FyZHMoKSwgYXBpLmdldFVzZXJJbmZvKCldKVxyXG5cdC50aGVuKChbaXRlbXMsIHsgbmFtZSwgYWJvdXQsIGF2YXRhciwgX2lkIH1dKSA9PiB7XHJcblx0XHRjdXJyZW50VXNlcklkID0gX2lkO1xyXG5cdFx0Y2FyZHNMaXN0LnNldEl0ZW1zKGl0ZW1zLnJldmVyc2UoKSk7XHJcblx0XHRjYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcclxuXHRcdHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSk7XHJcblx0XHRwcm9maWxlSW5mby5zZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pO1xyXG5cdH0pXHJcblx0LmNhdGNoKChlcnIpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INC30LDQs9GA0YPQt9C60LUg0LTQsNC90L3Ri9GFINGBINGB0LXRgNCy0LXRgNCwOiAke2Vycn1gKTtcclxuXHR9KTtcclxuIl0sIm5hbWVzIjpbInByb2ZpbGVFZGl0QnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUFkZEJ0biIsInByb2ZpbGVBdmF0YXJFZGl0QnRuIiwicG9wdXBFZGl0QXZhdGFyIiwicG9wdXBFZGl0UHJvZmlsZSIsInBvcHVwRWRpdFByb2ZpbGVGb3JtIiwicG9wdXBBZGQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwicG9wdXBBZGRGb3JtIiwicG9wdXBab29tIiwiY2FyZHNMYXlvdXQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvckNsYXNzQWN0aXZlIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfYWx0IiwiYWx0IiwidW5kZWZpbmVkIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZElkIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJjdXJyZW50VXNlcklkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2NhcmRUaXRsZSIsIl9jYXJkSW1nIiwiX2xpa2VCdG4iLCJfbGlrZUNvdW50ZXIiLCJfcmVtb3ZlQnRuIiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJzcmMiLCJfc2hvd0NhcmRMaWtlcyIsIl9zaG93TGlrZVN0YXR1cyIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYXNMaWtlZCIsImNsYXNzTGlzdCIsImFkZCIsImxlbmd0aCIsImZpbmQiLCJpdGVtIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImRpc2FibGVkIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5jbHVkZUludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uRWxlbWVudCIsIl9lbmFibGVCdXR0b25FbGVtZW50IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX2l0ZW1zQXJyYXkiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW1zIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Nsb3NlQnRuIiwiX3BvcHVwQ29udGFpbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJlIiwia2V5IiwiY2xvc2VQb3B1cCIsInRhcmdldCIsIl9oYW5kbGVPdmVybGF5Q2xvc2UiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl9pbWFnZUNhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiZGVmYXVsdFN1Ym1pdFRleHQiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfc3VibWl0QnRuIiwiX2RlZmF1bHRTdWJtaXRUZXh0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImlzRmV0Y2hpbmciLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRBY3Rpb24iLCJhY3Rpb24iLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2MiLCJwcmlmaWxlQXZhdGFyIiwiX2Fib3V0IiwiX2F2YXRhciIsImFib3V0IiwiYXZhdGFyIiwiQXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsInVybCIsIm9wdGlvbnMiLCJmZXRjaCIsInRoZW4iLCJfb25SZXNwb25zZSIsIl9yZXF1ZXN0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJwb3B1cEVkaXRWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXBBZGRWYWxpZGF0b3IiLCJwb3B1cEF2YXRhclZhbGlkYXRvciIsImNhcmRzTGlzdCIsImNhcmRJdGVtIiwiY2FyZCIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwicHJvZmlsZUluZm8iLCJwcm9maWxlRWRpdG9yIiwiZm9ybURhdGEiLCJsb2FkaW5nSW5kaWNhdG9yIiwiYXBpIiwic2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJuZXdDYXJkUmVuZGVyZXIiLCJhZGRDYXJkIiwicmVuZGVyQ2FyZCIsInVzZXJBdmF0YXJFZGl0b3IiLCJmb3JtVXJsIiwic2V0QXZhdGFyIiwic2V0VXNlckF2YXRhciIsImNhcmRJbWdab29tIiwidXNlckNvbmZpcm1hdGlvbiIsIm9wZW5Qb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImRlbGV0ZUNhcmQiLCJnZXRDYXJkSWQiLCJyZW1vdmVDYXJkIiwidG9nZ2xlQ2FyZExpa2VTdGF0dXMiLCJ1cGRhdGVMaWtlQ291bnRlciIsImdlbmVyYXRlQ2FyZCIsInByb2ZEYXRhIiwiZ2V0VXNlckluZm8iLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0VmFsaWFkdGlvbiIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJnZXRDYXJkcyIsInNldEl0ZW1zIiwicmV2ZXJzZSIsInJlbmRlckl0ZW1zIl0sInNvdXJjZVJvb3QiOiIifQ==