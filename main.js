(()=>{"use strict";var e=document.querySelector(".profile__edit-btn"),t=(document.querySelector(".profile__name"),document.querySelector(".profile__desc"),document.querySelector(".profile__add-btn")),n=document.querySelector(".popup_type_edit-profile"),r=n.querySelector(".popup__form"),o=(n.querySelector(".popup__input_type_name"),n.querySelector(".popup__input_type_profession"),n.querySelector(".popup__submit-btn"),Array.from(n.querySelectorAll(".popup__input")),document.querySelector(".popup_type_add-card")),i=o.querySelector(".popup__form"),u=(i.querySelector(".popup__input_type_img-title"),i.querySelector(".popup__input_type_img-link"),o.querySelector(".popup__submit-btn"),Array.from(o.querySelectorAll(".popup__input")),document.querySelector(".popup_type_zoom-img")),c=(u.querySelector(".popup__img"),u.querySelector(".popup__img-desc"),document.querySelector(".cards-layout")),a=(document.querySelector(".card-template"),document.querySelectorAll(".popup"),document.querySelectorAll(".popup__close-btn"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-btn",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error",errorClassActive:"popup__input-error_active"});function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t.name,this._link=t.link,this._alt=t.alt,void 0===t.alt&&(this._alt="Изображение: ".concat(t.name)),this._cardSelector=n,this._handleCardClick=r,this._handleDeleteClick=o}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.cloneNode(!0).querySelector(".card")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardTitle=this._element.querySelector(".card__title"),this._cardImg=this._element.querySelector(".card__image"),this._likeBtn=this._element.querySelector(".card__like-btn"),this._removeBtn=this._element.querySelector(".card__remove-btn"),this._cardTitle.textContent=this._name,this._cardImg.src=this._link,this._cardImg.alt=this._alt,this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._removeBtn.addEventListener("click",(function(){e._handleDeleteClick(e)})),this._likeBtn.addEventListener("click",(function(){e.setCardLike()})),this._cardImg.addEventListener("click",(function(){e._handleCardClick(e._name,e._link,e._alt)}))}},{key:"removeCard",value:function(){this._element.remove(),this._element=null}},{key:"_setCardLike",value:function(){this._likeBtn.classList.toggle("card__like-btn_active")}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._buttonElement=this._formElement.querySelector(this._config.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClassActive),t.textContent=""}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.classList.add(this._config.errorClassActive),t.textContent=e.validationMessage}},{key:"_includeInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_disableButtonElement",value:function(){this._buttonElement.disabled=!0}},{key:"_enableButtonElement",value:function(){this._buttonElement.disabled=!1}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._toggleButtonState()}},{key:"_toggleButtonState",value:function(){this._includeInvalidInput()?this._disableButtonElement():this._enableButtonElement()}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValiadtion",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._itemsArray.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"setItems",value:function(e){this._itemsArray=e}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._closeBtn=this._popup.querySelector(".popup__close-btn"),this._popupContainer=this._popup.querySelector(".popup__container"),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"closePopup",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.closePopup()}},{key:"_handleOverlayClose",value:function(e){e.target!=this._popup&&e.target!=this._popupContainer||this.closePopup()}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleOverlayClose.bind(this)),this._closeBtn.addEventListener("click",this.closePopup.bind(this))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function S(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._popup.querySelector(".popup__img"),t._imageCaption=t._popup.querySelector(".popup__img-desc"),t}return t=u,(n=[{key:"openPopup",value:function(e,t,n){this._image.src=t,this._image.alt=n,this._imageCaption.textContent=e,b(E(u.prototype),"openPopup",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function L(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e,t){var n,r=t.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e)).handleFormSubmit=r,n._form=n._popup.querySelector(".popup__form"),n._submitBtn=n._popup.querySelector(".popup__submit-btn"),n._inputList=n._popup.querySelectorAll(".popup__input"),n._formValues={},n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e.handleFormSubmit(e._getInputValues()),e._form.reset()})),P(I(u.prototype),"setEventListeners",this).call(this)}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"closePopup",value:function(){P(I(u.prototype),"closePopup",this).call(this),this._form.reset()}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(h);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t),this._description=document.querySelector(n)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,description:this._description.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._description.textContent=e.description}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t,this._token=n}var t,n;return t=e,(n=[{key:"_onResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._token}}).then((function(t){return e._onResponse(t)}))}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:n,link:r})}).then((function(e){return t._onResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:{authorization:this._token}}).then((function(e){return t._onResponse(e)}))}}])&&V(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=new y({renderer:function(e){var t=H(e);x.addItem(t)}},".cards-layout"),U=new f(a,r);U.enableValidation();var D=new f(a,i);D.enableValidation();var z=new T(".profile__name",".profile__desc"),F=new B(".popup_type_edit-profile",{handleFormSubmit:function(e){z.setUserInfo(e),F.closePopup()}});F.setEventListeners();var N=new B(".popup_type_add-card",{handleFormSubmit:function(e){Q.addCard(e).then((function(e){K(e),N.closePopup()}))}});N.setEventListeners();var J=new w(".popup_type_zoom-img");J.setEventListeners();var M=function(e,t,n){J.openPopup(e,t,n)},G=function(e){console.log(e),Q.deleteCard(e)},H=function(e){return new s(e,".card-template",M,G).generateCard()},K=function(e){c.prepend(H(e))};e.addEventListener("click",(function(){var e=z.getUserInfo();F.setInputValues(e),U.resetValiadtion(),F.openPopup()})),t.addEventListener("click",(function(){D.resetValiadtion(),N.openPopup()}));var Q=new A("https://mesto.nomoreparties.co/v1/cohort-51","a86c3d3e-174b-4d9f-bd44-c500fe855ebc");Q.getCards().then((function(e){x.setItems(e),x.renderItems()})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBWUMsVUFBVWpJLEVBQU1FLEVBQU1FLEVBQ2xDLEVBRUtQLEVBQW9CLFNBQUNvSCxHQUMxQmlCLFFBQVFDLElBQUlsQixHQUNaWSxFQUFJTyxXQUFXbkIsRUFDZixFQUVLQyxFQUFhLFNBQUN4SCxHQU9uQixPQU5hLElBQUlELEVBQ2hCQyxFQUNBLGlCQUNBRSxFQUNBQyxHQUNDd0ksY0FFRixFQUVLTixFQUFhLFNBQUNySSxHQUNuQlYsRUFBWXlFLFFBQVF5RCxFQUFXeEgsR0FDL0IsRUFFRHRCLEVBQWVnRCxpQkFBaUIsU0FBUyxXQUN4QyxJQUFNa0gsRUFBV2YsRUFBWWdCLGNBQzdCZixFQUFjZ0IsZUFBZUYsR0FDN0JsQixFQUFtQnFCLGtCQUNuQmpCLEVBQWNTLFdBQ2QsSUFFRDFKLEVBQWM2QyxpQkFBaUIsU0FBUyxXQUN2Q2tHLEVBQWtCbUIsa0JBQ2xCYixFQUFnQkssV0FDaEIsSUFFRCxJQUFNSixFQUFNLElBQUluQyxFVDdDQSw4Q0FDRix3Q1M4Q2RtQyxFQUNFYSxXQUNBbEMsTUFBSyxTQUFDOUMsR0FDTnFELEVBQVU0QixTQUFTakYsR0FDbkJxRCxFQUFVNkIsYUFDVixJQUNBQyxPQUFNLFNBQUNDLEdBQ1BaLFFBQVFDLElBQUlXLEVBQ1osRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9kYXRhLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHQvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0L1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdC9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiKTtcclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5jb25zdCBwb3B1cEVkaXROYW1lID0gcG9wdXBFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgcG9wdXBFZGl0UHJvZmVzc2lvbiA9IHBvcHVwRWRpdC5xdWVyeVNlbGVjdG9yKFxyXG5cdFwiLnBvcHVwX19pbnB1dF90eXBlX3Byb2Zlc3Npb25cIlxyXG4pO1xyXG5jb25zdCBwb3B1cEVkaXRTdWJtaXRCdG4gPSBwb3B1cEVkaXQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ0blwiKTtcclxuY29uc3QgcG9wdXBFZGl0SW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuXHRwb3B1cEVkaXQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIilcclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xyXG5jb25zdCBwb3B1cEFkZEZvcm0gPSBwb3B1cEFkZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5jb25zdCBwb3B1cEFkZEltZ1RpdGxlID0gcG9wdXBBZGRGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIucG9wdXBfX2lucHV0X3R5cGVfaW1nLXRpdGxlXCJcclxuKTtcclxuY29uc3QgcG9wdXBBZGRJbWdMaW5rID0gcG9wdXBBZGRGb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcblx0XCIucG9wdXBfX2lucHV0X3R5cGVfaW1nLWxpbmtcIlxyXG4pO1xyXG5jb25zdCBwb3B1cEFkZFN1Ym1pdEJ0biA9IHBvcHVwQWRkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3N1Ym1pdC1idG5cIik7XHJcbmNvbnN0IHBvcHVwQWRkSW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuXHRwb3B1cEFkZC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKVxyXG4pO1xyXG5cclxuY29uc3QgcG9wdXBab29tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3pvb20taW1nXCIpO1xyXG5jb25zdCBwb3B1cFpvb21JbWcgPSBwb3B1cFpvb20ucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1nXCIpO1xyXG5jb25zdCBwb3B1cFpvb21EZXNjID0gcG9wdXBab29tLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZy1kZXNjXCIpO1xyXG5cclxuY29uc3QgY2FyZHNMYXlvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzLWxheW91dFwiKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkLXRlbXBsYXRlXCIpO1xyXG5cclxuY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcclxuY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fY2xvc2UtYnRuXCIpO1xyXG5jb25zdCBnZXRDYXJkQnlFdmVudCA9IChlKSA9PiBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdChcIi5jYXJkXCIpO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuXHRmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcblx0aW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcblx0c3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zdWJtaXQtYnRuXCIsXHJcblx0aW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcblx0aW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcblx0ZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JcIixcclxuXHRlcnJvckNsYXNzQWN0aXZlOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbmNvbnN0IGJhc2VVcmwgPSBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNTFcIjtcclxuY29uc3QgdG9rZW4gPSBcImE4NmMzZDNlLTE3NGItNGQ5Zi1iZDQ0LWM1MDBmZTg1NWViY1wiO1xyXG5cclxuZXhwb3J0IHtcclxuXHRwcm9maWxlRWRpdEJ0bixcclxuXHRwcm9maWxlTmFtZSxcclxuXHRwcm9maWxlRGVzY3JpcHRpb24sXHJcblx0cHJvZmlsZUFkZEJ0bixcclxuXHRwb3B1cEVkaXQsXHJcblx0cG9wdXBFZGl0Rm9ybSxcclxuXHRwb3B1cEVkaXROYW1lLFxyXG5cdHBvcHVwRWRpdFByb2Zlc3Npb24sXHJcblx0cG9wdXBFZGl0U3VibWl0QnRuLFxyXG5cdHBvcHVwRWRpdElucHV0TGlzdCxcclxuXHRwb3B1cEFkZCxcclxuXHRwb3B1cEFkZEZvcm0sXHJcblx0cG9wdXBBZGRJbWdUaXRsZSxcclxuXHRwb3B1cEFkZEltZ0xpbmssXHJcblx0cG9wdXBBZGRTdWJtaXRCdG4sXHJcblx0cG9wdXBBZGRJbnB1dExpc3QsXHJcblx0cG9wdXBab29tLFxyXG5cdHBvcHVwWm9vbUltZyxcclxuXHRwb3B1cFpvb21EZXNjLFxyXG5cdGNhcmRzTGF5b3V0LFxyXG5cdGNhcmRUZW1wbGF0ZSxcclxuXHRwb3B1cHMsXHJcblx0Y2xvc2VCdXR0b25zLFxyXG5cdGdldENhcmRCeUV2ZW50LFxyXG5cdHZhbGlkYXRpb25Db25maWcsXHJcblx0YmFzZVVybCxcclxuXHR0b2tlbixcclxufTtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcblx0Y29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrKSB7XHJcblx0XHR0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG5cdFx0dGhpcy5fbGluayA9IGRhdGEubGluaztcclxuXHRcdHRoaXMuX2FsdCA9IGRhdGEuYWx0O1xyXG5cdFx0aWYgKGRhdGEuYWx0ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5fYWx0ID0gYNCY0LfQvtCx0YDQsNC20LXQvdC40LU6ICR7ZGF0YS5uYW1lfWA7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG5cdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG5cdFx0dGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuXHR9XHJcblxyXG5cdF9nZXRUZW1wbGF0ZSgpIHtcclxuXHRcdGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG5cdFx0XHQuY29udGVudC5jbG9uZU5vZGUodHJ1ZSlcclxuXHRcdFx0LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcclxuXHJcblx0XHRyZXR1cm4gY2FyZEVsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRnZW5lcmF0ZUNhcmQoKSB7XHJcblx0XHR0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHRcdHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuXHRcdHRoaXMuX2NhcmRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcblx0XHR0aGlzLl9saWtlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xyXG5cdFx0dGhpcy5fcmVtb3ZlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3JlbW92ZS1idG5cIik7XHJcblx0XHR0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cdFx0dGhpcy5fY2FyZEltZy5zcmMgPSB0aGlzLl9saW5rO1xyXG5cdFx0dGhpcy5fY2FyZEltZy5hbHQgPSB0aGlzLl9hbHQ7XHJcblx0XHR0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cdFx0cmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcblx0fVxyXG5cclxuXHRfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcblx0XHR0aGlzLl9yZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0Q2FyZExpa2UoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2NhcmRJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmssIHRoaXMuX2FsdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlbW92ZUNhcmQoKSB7XHJcblx0XHR0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5fZWxlbWVudCA9IG51bGw7XHJcblx0fVxyXG5cclxuXHRfc2V0Q2FyZExpa2UoKSB7XHJcblx0XHR0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9hY3RpdmVcIik7XHJcblx0fVxyXG59XHJcbmV4cG9ydCB7IENhcmQgfTtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcblx0Y29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xyXG5cdFx0dGhpcy5fY29uZmlnID0gY29uZmlnO1xyXG5cdFx0dGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuXHRcdHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcblx0XHRcdHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnLmlucHV0U2VsZWN0b3IpXHJcblx0XHQpO1xyXG5cdFx0dGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvclxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG5cdFx0KTtcclxuXHRcdGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3NBY3RpdmUpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuXHR9XHJcblxyXG5cdF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuXHRcdGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG5cdFx0KTtcclxuXHRcdGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3NBY3RpdmUpO1xyXG5cdFx0ZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG5cdH1cclxuXHJcblx0X2luY2x1ZGVJbnZhbGlkSW5wdXQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG5cdFx0XHRyZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0X2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuXHRcdGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuXHRcdFx0dGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfZGlzYWJsZUJ1dHRvbkVsZW1lbnQoKSB7XHJcblx0XHR0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdF9lbmFibGVCdXR0b25FbGVtZW50KCkge1xyXG5cdFx0dGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0X3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0dGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG5cdFx0XHRpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuXHRcdFx0XHR0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuXHRcdFx0XHR0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblx0fVxyXG5cclxuXHRfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcblx0XHRpZiAodGhpcy5faW5jbHVkZUludmFsaWRJbnB1dCgpKSB7XHJcblx0XHRcdHRoaXMuX2Rpc2FibGVCdXR0b25FbGVtZW50KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9lbmFibGVCdXR0b25FbGVtZW50KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRlbmFibGVWYWxpZGF0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHR9XHJcblxyXG5cdHJlc2V0VmFsaWFkdGlvbigpIHtcclxuXHRcdHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG5cdFx0dGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG5cdFx0XHR0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgeyBGb3JtVmFsaWRhdG9yIH07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG5cdGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuXHRcdHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblx0XHR0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlckl0ZW1zKCkge1xyXG5cdFx0dGhpcy5faXRlbXNBcnJheS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcblx0XHRcdHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRhZGRJdGVtKGVsZW1lbnQpIHtcclxuXHRcdHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG5cdH1cclxuXHRzZXRJdGVtcyhpdGVtcykge1xyXG5cdFx0dGhpcy5faXRlbXNBcnJheSA9IGl0ZW1zO1xyXG5cdH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG5cdFx0dGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idG5cIik7XHJcblx0XHR0aGlzLl9wb3B1cENvbnRhaW5lciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2NvbnRhaW5lclwiKTtcclxuXHRcdHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuXHR9XHJcblxyXG5cdG9wZW5Qb3B1cCgpIHtcclxuXHRcdHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcblx0fVxyXG5cclxuXHRjbG9zZVBvcHVwKCkge1xyXG5cdFx0dGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuXHR9XHJcblxyXG5cdF9oYW5kbGVFc2NDbG9zZShlKSB7XHJcblx0XHRpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuXHRcdFx0dGhpcy5jbG9zZVBvcHVwKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfaGFuZGxlT3ZlcmxheUNsb3NlKGUpIHtcclxuXHRcdGlmIChlLnRhcmdldCA9PSB0aGlzLl9wb3B1cCB8fCBlLnRhcmdldCA9PSB0aGlzLl9wb3B1cENvbnRhaW5lcikge1xyXG5cdFx0XHR0aGlzLmNsb3NlUG9wdXAoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0dGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZS5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuX2Nsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsb3NlUG9wdXAuYmluZCh0aGlzKSk7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG5cdFx0c3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcblx0XHR0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZ1wiKTtcclxuXHRcdHRoaXMuX2ltYWdlQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltZy1kZXNjXCIpO1xyXG5cdH1cclxuXHRvcGVuUG9wdXAobmFtZSwgbGluaywgYWx0KSB7XHJcblx0XHR0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG5cdFx0dGhpcy5faW1hZ2UuYWx0ID0gYWx0O1xyXG5cdFx0dGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuXHRcdHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG5cdH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgeyBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuXHRcdHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG5cdFx0dGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuXHRcdHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG5cdFx0dGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0LWJ0blwiKTtcclxuXHRcdHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG5cdFx0dGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG5cdH1cclxuXHRfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcblx0XHR0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuXHRcdFx0dGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcblx0fVxyXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0Ly8gIGFkZCBzdWJtaXQgaGFuZGxlciDQtNC+0LHQsNCy0LvRj9GC0Ywg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQsNCx0LzQuNGC0LAg0YTQvtGA0LzRiy5cclxuXHRcdHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuaGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuXHRcdFx0dGhpcy5fZm9ybS5yZXNldCgpO1xyXG5cdFx0fSk7XHJcblx0XHRzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cdH1cclxuXHRzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcblx0XHR0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuXHRcdFx0aW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdGNsb3NlUG9wdXAoKSB7XHJcblx0XHQvL2Nsb3NlIHBvcHVwIGFuZCByZXNldCBmb3JtXHJcblx0XHRzdXBlci5jbG9zZVBvcHVwKCk7XHJcblx0XHR0aGlzLl9mb3JtLnJlc2V0KCk7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuXHRjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZURlc2MpIHtcclxuXHRcdHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVOYW1lKTtcclxuXHRcdHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlRGVzYyk7XHJcblx0fVxyXG5cdGdldFVzZXJJbmZvKCkge1xyXG5cdFx0Y29uc3QgdXNlckRhdGEgPSB7XHJcblx0XHRcdG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcblx0XHRcdGRlc2NyaXB0aW9uOiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCxcclxuXHRcdH07XHJcblx0XHRyZXR1cm4gdXNlckRhdGE7XHJcblx0fVxyXG5cdHNldFVzZXJJbmZvKGRhdGEpIHtcclxuXHRcdHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcblx0XHR0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcblx0Y29uc3RydWN0b3IoYmFzZVVybCwgdG9rZW4pIHtcclxuXHRcdHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG5cdFx0dGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuXHR9XHJcblx0X29uUmVzcG9uc2UocmVzKSB7XHJcblx0XHRpZiAocmVzLm9rKSB7XHJcblx0XHRcdHJldHVybiByZXMuanNvbigpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxuXHR9XHJcblxyXG5cdGdldENhcmRzKCkge1xyXG5cdFx0cmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0YXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcblx0XHRcdH0sXHJcblx0XHR9KS50aGVuKChyZXMpID0+IHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX29uUmVzcG9uc2UocmVzKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcblx0XHRyZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcblx0XHRcdG1ldGhvZDogXCJQT1NUXCIsXHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuXHRcdFx0XHRcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuXHRcdFx0fSxcclxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pLFxyXG5cdFx0fSkudGhlbigocmVzKSA9PiB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9vblJlc3BvbnNlKHJlcyk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0ZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuXHRcdHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcblx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuXHRcdFx0fSxcclxuXHRcdH0pLnRoZW4oKHJlcykgPT4ge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fb25SZXNwb25zZShyZXMpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7XHJcblx0cHJvZmlsZUVkaXRCdG4sXHJcblx0cHJvZmlsZUFkZEJ0bixcclxuXHRwb3B1cEVkaXRGb3JtLFxyXG5cdHBvcHVwQWRkRm9ybSxcclxuXHRjYXJkc0xheW91dCxcclxuXHR2YWxpZGF0aW9uQ29uZmlnLFxyXG5cdGJhc2VVcmwsXHJcblx0dG9rZW4sXHJcbn0gZnJvbSBcIi4vc2NyaXB0L2RhdGEuanNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL3NjcmlwdC9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9zY3JpcHQvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9zY3JpcHQvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vc2NyaXB0L1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL3NjcmlwdC9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9zY3JpcHQvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi9zY3JpcHQvQXBpLmpzXCI7XHJcblxyXG5jb25zdCBDYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcclxuXHR7XHJcblx0XHRyZW5kZXJlcjogKGNhcmRJdGVtKSA9PiB7XHJcblx0XHRcdGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGNhcmRJdGVtKTtcclxuXHRcdFx0Q2FyZHNMaXN0LmFkZEl0ZW0oY2FyZCk7XHJcblx0XHR9LFxyXG5cdH0sXHJcblx0XCIuY2FyZHMtbGF5b3V0XCJcclxuKTtcclxuXHJcbmNvbnN0IHBvcHVwRWRpdFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwRWRpdEZvcm0pO1xyXG5wb3B1cEVkaXRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jb25zdCBwb3B1cEFkZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwQWRkRm9ybSk7XHJcbnBvcHVwQWRkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX25hbWVcIiwgXCIucHJvZmlsZV9fZGVzY1wiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0b3IgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2VkaXQtcHJvZmlsZVwiLCB7XHJcblx0aGFuZGxlRm9ybVN1Ym1pdDogKGZvcm1EYXRhKSA9PiB7XHJcblx0XHRwcm9maWxlSW5mby5zZXRVc2VySW5mbyhmb3JtRGF0YSk7XHJcblx0XHRwcm9maWxlRWRpdG9yLmNsb3NlUG9wdXAoKTtcclxuXHR9LFxyXG59KTtcclxuXHJcbnByb2ZpbGVFZGl0b3Iuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IG5ld0NhcmRSZW5kZXJlciA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3R5cGVfYWRkLWNhcmRcIiwge1xyXG5cdGhhbmRsZUZvcm1TdWJtaXQ6IChmb3JtRGF0YSkgPT4ge1xyXG5cdFx0YXBpLmFkZENhcmQoZm9ybURhdGEpLnRoZW4oKGl0ZW0pID0+IHtcclxuXHRcdFx0cmVuZGVyQ2FyZChpdGVtKTtcclxuXHRcdFx0bmV3Q2FyZFJlbmRlcmVyLmNsb3NlUG9wdXAoKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcbn0pO1xyXG5cclxubmV3Q2FyZFJlbmRlcmVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjYXJkSW1nWm9vbSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX3pvb20taW1nXCIpO1xyXG5cclxuY2FyZEltZ1pvb20uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChuYW1lLCBsaW5rLCBhbHQpID0+IHtcclxuXHRjYXJkSW1nWm9vbS5vcGVuUG9wdXAobmFtZSwgbGluaywgYWx0KTtcclxufTtcclxuXHJcbmNvbnN0IGhhbmRsZURlbGV0ZUNsaWNrID0gKGNhcmQpID0+IHtcclxuXHRjb25zb2xlLmxvZyhjYXJkKTtcclxuXHRhcGkuZGVsZXRlQ2FyZChjYXJkKTtcclxufTtcclxuXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xyXG5cdGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuXHRcdGRhdGEsXHJcblx0XHRcIi5jYXJkLXRlbXBsYXRlXCIsXHJcblx0XHRoYW5kbGVDYXJkQ2xpY2ssXHJcblx0XHRoYW5kbGVEZWxldGVDbGlja1xyXG5cdCkuZ2VuZXJhdGVDYXJkKCk7XHJcblx0cmV0dXJuIGNhcmQ7XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJDYXJkID0gKGRhdGEpID0+IHtcclxuXHRjYXJkc0xheW91dC5wcmVwZW5kKGNyZWF0ZUNhcmQoZGF0YSkpO1xyXG59O1xyXG5cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHRjb25zdCBwcm9mRGF0YSA9IHByb2ZpbGVJbmZvLmdldFVzZXJJbmZvKCk7XHJcblx0cHJvZmlsZUVkaXRvci5zZXRJbnB1dFZhbHVlcyhwcm9mRGF0YSk7XHJcblx0cG9wdXBFZGl0VmFsaWRhdG9yLnJlc2V0VmFsaWFkdGlvbigpO1xyXG5cdHByb2ZpbGVFZGl0b3Iub3BlblBvcHVwKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cdHBvcHVwQWRkVmFsaWRhdG9yLnJlc2V0VmFsaWFkdGlvbigpO1xyXG5cdG5ld0NhcmRSZW5kZXJlci5vcGVuUG9wdXAoKTtcclxufSk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGJhc2VVcmwsIHRva2VuKTtcclxuXHJcbmFwaVxyXG5cdC5nZXRDYXJkcygpXHJcblx0LnRoZW4oKGl0ZW1zKSA9PiB7XHJcblx0XHRDYXJkc0xpc3Quc2V0SXRlbXMoaXRlbXMpO1xyXG5cdFx0Q2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblx0fSlcclxuXHQuY2F0Y2goKGVycikgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2coZXJyKTtcclxuXHR9KTtcclxuIl0sIm5hbWVzIjpbInByb2ZpbGVFZGl0QnRuIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUFkZEJ0biIsInBvcHVwRWRpdCIsInBvcHVwRWRpdEZvcm0iLCJwb3B1cEFkZCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEFkZEZvcm0iLCJwb3B1cFpvb20iLCJjYXJkc0xheW91dCIsInZhbGlkYXRpb25Db25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImVycm9yQ2xhc3NBY3RpdmUiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9hbHQiLCJhbHQiLCJ1bmRlZmluZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkVGl0bGUiLCJfY2FyZEltZyIsIl9saWtlQnRuIiwiX3JlbW92ZUJ0biIsInRleHRDb250ZW50Iiwic3JjIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldENhcmRMaWtlIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJfYnV0dG9uRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImRpc2FibGVkIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5jbHVkZUludmFsaWRJbnB1dCIsIl9kaXNhYmxlQnV0dG9uRWxlbWVudCIsIl9lbmFibGVCdXR0b25FbGVtZW50IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX2l0ZW1zQXJyYXkiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9jbG9zZUJ0biIsIl9wb3B1cENvbnRhaW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsImtleSIsImNsb3NlUG9wdXAiLCJ0YXJnZXQiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2UiLCJfaW1hZ2VDYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9zdWJtaXRCdG4iLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjIiwiX2Rlc2NyaXB0aW9uIiwiZGVzY3JpcHRpb24iLCJBcGkiLCJiYXNlVXJsIiwidG9rZW4iLCJfYmFzZVVybCIsIl90b2tlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsIl9vblJlc3BvbnNlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJDYXJkc0xpc3QiLCJjYXJkSXRlbSIsImNhcmQiLCJjcmVhdGVDYXJkIiwiYWRkSXRlbSIsInBvcHVwRWRpdFZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cEFkZFZhbGlkYXRvciIsInByb2ZpbGVJbmZvIiwicHJvZmlsZUVkaXRvciIsImZvcm1EYXRhIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsIm5ld0NhcmRSZW5kZXJlciIsImFwaSIsImFkZENhcmQiLCJyZW5kZXJDYXJkIiwiY2FyZEltZ1pvb20iLCJvcGVuUG9wdXAiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsInByb2ZEYXRhIiwiZ2V0VXNlckluZm8iLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0VmFsaWFkdGlvbiIsImdldENhcmRzIiwic2V0SXRlbXMiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==